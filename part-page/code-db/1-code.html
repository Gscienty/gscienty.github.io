<html>
<head>
    <meta charset="utf-8" />
    <title>Pie</title>
</head>

<body>
    <script type="text/javascript" src="../../javascripts/d3.min.js"></script>
    <div id="lastest-list">
        <div class="list-group-item item-limit col-md-10">
            <div id="journal-calculate-chart">
            </div>
            <script>
                (function() {
                    var root = this;
                    var defaultOption = {
                        width: 200,
                        height: 200,
                    };

                    var chartpie = function (id, opt) {
                        var options = opt == undefined ? defaultOption:opt;
                        var svg = d3.select('#'+id).append('svg').attr({width:options.width,height:options.height});
                        var data = [2,42];
                        var outerRadius = options.width/2;
                        var innerRadius = options.width/3;
                        var arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);
                        var color = d3.scale.category10();

                        function clone(obj){
                            function Clone(){}
                            Clone.prototype = obj;
                            var o = new Clone();
                            for(var a in o){
                                if(typeof o[a] == "object") {
                                    o[a] = clone(o[a]);
                                }
                            }
                            return o;
                        };



                        this.set_data = function () {
                            var pietrans = d3.layout.pie();
                            var arcs = svg.selectAll('g')
                            .data(pietrans(data))
                            .enter()
                            .append('g')
                            .attr('transform','translate('+outerRadius+','+outerRadius+')');

                            arcs.append('path')
                                .attr({
                                    fill:function (d,i) {
                                        return color(i);
                                    },
                                    d: function (a) {
                                        return arc(a);
                                    }
                                });
                        };
                    };

                    root.chartpie = chartpie;
                }).call(this);

                var p = new chartpie('journal-calculate-chart');
                p.set_data();
            </script>
        </div>
    </div>

</body>

</html>
